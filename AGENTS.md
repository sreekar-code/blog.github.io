# AGENTS.md - Coding Guidelines for sreekarscribbles

## Build / Lint / Test Commands

This is a **static HTML/CSS site** self-hosted on a Raspberry Pi, with GitHub as the middleman.

- **No build process**: Files are served directly as static assets
- **No linting**: No ESLint, Stylelint, or other linters configured
- **No tests**: No test framework configured
- **To preview locally**: `python3 -m http.server 8000` from the repo root
- **To publish**: commit + push to `main` → GitHub Action runs → `sudo git pull` on Pi

## Deployment

```
Mac (edit) → GitHub (middleman) → Raspberry Pi (serves site)
```

- Site is self-hosted on Raspberry Pi via Nginx + Cloudflare Tunnel
- Domain: sreekarscribbles.com
- GitHub Actions auto-regenerates `feed.xml` on every push (see `.github/workflows/generate-feed.yml`)

## File Organization

```
/
├── index.html              # Homepage
├── blog.html               # Blog listing page (source of truth for all posts)
├── flow.html               # Weekly writing tracker (calendar + streak)
├── cooking.html            # Upcoming post titles
├── styles.css              # Global styles (dark theme only)
├── feed.xml                # RSS feed (auto-generated by GitHub Action)
├── generate-feed.py        # Script to regenerate feed.xml from blog.html
├── dates.json              # Post dates for the Flow tracker
├── AGENTS.md               # This file
├── README.md               # Project overview
├── .github/
│   └── workflows/
│       └── generate-feed.yml   # Auto-generates feed.xml on push
├── blog/                   # Individual blog post HTML files
│   └── *.html
└── images/                 # Image assets
    ├── me.jpg
    ├── myway.jpg
    ├── gokarna.jpg
    └── tree.jpeg
```

## Code Style Guidelines

### HTML

- Use HTML5 doctype: `<!DOCTYPE html>`
- Always include `data-theme="dark"` on `<html>` tag — site is dark mode only
- Include viewport meta tag: `<meta name="viewport" content="width=device-width, initial-scale=1.0">`
- Use semantic tags: `<main>`, `<section>`, `<header>`, `<footer>`
- Indent with 4 spaces
- Use double quotes for attributes
- Analytics script (Umami) must be in `<head>`:
  ```html
  <script async src="https://analytics.balla.dev/script.js" data-website-id="2d661ca0-e926-4c3c-8d8c-e948998a7ac8"></script>
  ```
- CSS link must include cache-busting version: `<link rel="stylesheet" href="styles.css?v=11">`
- Blog posts in `blog/` use `../styles.css?v=11`

### CSS

- All styles in `styles.css` (shared across all pages)
- **Dark theme only** — `:root` contains dark values, no light theme override
- Mobile-first with desktop overrides via `@media (min-width: 600px)`
- CSS custom properties used throughout for theming
- No CSS frameworks (Tailwind, Bootstrap, etc.)
- When updating `styles.css`, bump the version in all HTML files with:
  ```bash
  find . -name "*.html" -exec sed -i '' 's/styles\.css?v=N/styles.css?v=N+1/g' {} +
  ```
  Replace `N` and `N+1` with the current and next version numbers.

### JavaScript

- Vanilla JavaScript only (no frameworks)
- Use `const` and `let` (avoid `var`)
- Function declarations preferred over arrow functions for top-level functions
- Use `localStorage` for client-side persistence

### Flow Page Notes

- `flow.html` has a two-column desktop layout: calendar left, streak stat right
- The description `<p class="flow-desc">` sits **outside** `<main class="tracker">` so it doesn't interfere with the flex layout
- The admin "Log post" panel is hidden via `style="display:none"` and revealed by pressing `l` three times quickly
- `dates.json` stores post dates; synced to GitHub via the GitHub API using a stored token
- Calendar cells are 28px on mobile, 34px on desktop

### Blog Post Template

```html
<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post Title</title>
    <link rel="stylesheet" href="../styles.css?v=11">
    <script async src="https://analytics.balla.dev/script.js" data-website-id="2d661ca0-e926-4c3c-8d8c-e948998a7ac8"></script>
</head>
<body>
<main>
    <header class="blogtitle">Sreekar Scribbles</header>
    <p><a href="../index.html">Home</a> &nbsp;&nbsp; <a href="../blog.html">Blog</a> &nbsp;&nbsp; <a href="../flow.html">Flow</a> &nbsp;&nbsp; <a href="../cooking.html">Cooking</a></p>
    <hr>
    <h1>Post Title</h1>
    <section>
        <p class="date">DD MMM, YYYY</p>
    </section>
    <section>
        <!-- Post content here -->
    </section>
</main>
</body>
</html>
```

### Publishing a New Post

1. Create the HTML file in `blog/` using the template above
2. Add it to the top of the `<ul>` in `blog.html`
3. Commit and push — GitHub Action auto-updates `feed.xml`
4. `sudo git pull` on the Pi

### Naming Conventions

- **HTML files**: Title Case with hyphens (e.g., `What-Is-A-Problem.html`)
- **CSS classes**: lowercase, hyphenated (e.g., `.blogtitle`, `.site-footer`)
- **Images**: lowercase, hyphenated (e.g., `myway.jpg`, `gokarna.jpg`)

### Images

- Use `<img>` tags with descriptive alt text
- Store in `images/` directory
- Max dimensions handled by CSS: `max-width: 100%`, `max-height: 75vh`

### Links

- Internal links: relative paths (e.g., `blog.html`, `../index.html`)
- External links: use `target='_blank'` attribute
- Navigation uses `&nbsp;&nbsp;` for spacing between links

### Git Conventions

- Commit messages should describe the change concisely
- Push to `main` branch only

## External Dependencies

- Umami analytics: `analytics.balla.dev`
- GitHub API: used by `flow.html` to sync `dates.json`
- No npm packages, CDN links, or build tools
